<!DOCTYPE html>
<html lang="{{ or site.Language.LanguageCode site.Language.Lang }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  
  {{- if .Params.randomizeBackground }}
  <!-- Include the backgroundChanger.js file -->
  {{- with resources.Get "/js/backgroundChanger.js" }}
    {{- if eq hugo.Environment "development" }}
      {{- with . | js.Build }}
    <script defer src="{{ .RelPermalink }}"></script>
      {{- end }}
    {{- else }}
      {{- $opts := dict "minify" true }}
      {{- with . | js.Build $opts | fingerprint }}
    <script defer src="{{ .RelPermalink }}" integrity="{{- .Data.Integrity }}" crossorigin="anonymous"></script>
      {{- end }}
    {{- end }}
  {{- end }}
  {{- end }}
  {{ partial "head.html" . }}
  
  <style>
    /*  print styles  
    @page {
      size: 18in 24in;
    }
    */

    .player-square {
      border-width:1px;
      background-color: #f5f5f5;
    }
    .home-team {
      border-width: 1px;
      border-color: #004953;
      background-color: #004953;
      color: #f5f5f5;
    }
    .away-team {
      border-width: 1px;
      border-color: #000;
      background-color: #A5ACAF;
      color: #000
    }
    input.scores {
      border-width: 1px;
      border-color: #000;
    }
    .q1-winner {
      background-color: aquamarine;
    }
    .q2-winner {
      background-color: chartreuse;
    }
    .q3-winner {
      background-color: pink;
    }
    .fin-winner {
      background-color: darkgoldenrod; 
    }

    
  </style>
</head>
<body class=" flex flex-col text-neutral-900 dark:text-neutral-100 dark:bg-neutral-900 bg-neutral-100">
  {{ if not hugo.IsProduction }}
  <!-- tailwind size indicator -->
    {{ partial "tw-size-indicator.html" . }}
  {{ end }}
  <header class="fixed bottom-0 right-0 z-50 mb-auto print:mx-auto print:block print:top-0">
  {{/*  <header class="mx-auto mb-auto print:hidden">  */}}
    {{- partial "logo.html" . }}
  </header>
  <main class="flex h-full flex-col justify-center">
    
    <div class=" sm:hidden text-center print:hidden">
      <i class="fa-solid fa-rotate text-9xl m-5"></i><br/>
      rotate your screen for best viewing
    </div>
    <div class="fixed top-0 right-0 m-2  print:hidden ">
      <a href="#" id="printPage"><i class="fa-solid fa-print rounded-full p-3 text-xl bg-neutral-900 dark:bg-neutral-100 dark:text-neutral-900 text-neutral-100"></i></a>
    </div>
    <header class="flex h-full mx-auto p-2 print:hidden ">
      <form class="shadow-md rounded">
      <div class="w-full grid grid-cols-10 gap-1 border">
        <div class="col-span-2 flex items-center justify-center h-full w-full"><i class="text-2xl p-3 fa-solid fa-trophy"></i></div>
        <div class="col-span-2 flex items-center justify-center "><label for="asq1">1st</label></div>
        <div class="col-span-2 flex items-center justify-center "><label for="asq2">2nd</label></div>
        <div class="col-span-2 flex items-center justify-center "><label for="asq3">3rd</label></div>
        <div class="col-span-2 flex items-center justify-center "><label for="asfin">Final</label></div>
        <div class="col-span-2 flex items-center justify-center away-team">Away Team</div>
        <div class="col-span-2 flex items-center justify-center" id="as-q1"><input class="scores" type="number" name="as-q1" id="asq1" tabindex="1" /></div>
        <div class="col-span-2 flex items-center justify-center" id="as-q2"><input class="scores" type="number" name="as-q2" id="asq2" tabindex="3"/></div>
        <div class="col-span-2 flex items-center justify-center" id="as-q3"><input class="scores" type="number" name="as-q3" id="asq3" tabindex="5"/></div>
        <div class="col-span-2 flex items-center justify-center" id="as-fin"><input class="scores" type="number" name="as-fin" id="asfin" tabindex="7"/></div>
        <div class="col-span-2 flex items-center justify-center  home-team">Home Team</div>
        <div class="col-span-2 flex items-center justify-center" id="hs-q1"><input class="scores" type="number" name="hs-q1" tabindex="2"/></div>
        <div class="col-span-2 flex items-center justify-center" id="hs-q2"><input class="scores" type="number" name="hs-q2" tabindex="4"/></div>
        <div class="col-span-2 flex items-center justify-center" id="hs-q3"><input class="scores" type="number" name="hs-q3" tabindex="6"/></div>
        <div class="col-span-2 flex items-center justify-center" id="hs-fin"><input class="scores" type="number" name="hs-fin" tabindex="8"/></div>
      </div>
      </form>
    </header>
    <div class="  w-full md:w-5/6 lg:w-4/5 xl:w-7/12 2xl:w-7/12 print:w-full print:h-lvh aspect-square mx-auto squares-outer-grid grid grid-cols-12 gap-1">
      {{/*  THE Double Square Top Left */}}
      <div class=" col-span-2 row-span-2 flex items-center justify-center h-full w-full" id="0-0">
        <i class="text-5xl md:text-8xl print:text-3xl fa-solid fa-football"></i>
      </div>
      {{/*  TOP ROW HEADER - Spans 10 cols  */}}
      <div class="col-span-10 home-team flex items-center"><h2 class="mx-auto text-3xl">The Home Team</h2></div>
      {{/*  THE SECOND ROW 10 Numbers Squares  */}}
      {{ $htNums := shuffle (seq 0 9) }}
      {{/*  {{ range $index, $num := seq 10 }}  */}}
      {{ range $htNums }}
        <div class="home-team h-full flex justify-center items-center text-4xl">{{ . }}</div>
      {{ end }}

      {{/*  LEFT SIDE HEADER - Spans 10 Rows */}}
      <div class="row-span-10 away-team flex items-center justify-center"><h2 class="-rotate-90 whitespace-nowrap text-3xl">The Visiting Team</h2></div>

      <div class="row-span-10">
        {{/*  make sure this is kept in sync with the main grid spacing etc  */}}
        <div class="grid grid-rows-10 gap-2 h-full">
          {{ $atNums := shuffle (seq 0 9) }}
          {{/*  {{ range $index, $num := seq 10 }}  */}}
          {{ range $index, $num := $atNums }}
            <div class="away-team h-full flex items-center justify-center text-4xl">{{ $num }}</div>
          {{ end }}
        </div>
      </div>

      {{ $row := 0 }}
      {{ $col := 0 }}
      {{ $awayPic := 0 }}
      {{ $homePic := 0 }}
      {{ $gridx := 10 }}
      {{ $ppl := slice "p-david" "bruce" "adrian" "pooky" "kara" "dao" "ben" "bank" "winnie" "book" "dr paul" "carl" "stacey" }}
      {{ $randomIndex := 0 }}
      {{ range $index, $num := (seq ( mul $gridx $gridx )) }}
      {{ $row = add (div $index $gridx) 1 }}
      {{ $col = add (mod $index $gridx) 1 }}
      {{ $homePic = index $htNums ( sub $col 1 ) }}
      {{ $awayPic = index $atNums ( sub $row 1 ) }}
      <div class="hs-{{ $homePic }} as-{{ $awayPic }} player-square flex h-full items-center justify-center" id='{{ $row }}-{{ $col }}'>
        {{/*  {{ len $ppl }}  */}}
        {{ $randomIndex = index (seq 0 (sub (len $ppl) 1) | shuffle) 0 }}
        {{/*  {{ $randomIndex = sub $randomIndex 1 }}  */}}
        <div class="player-name break-words overflow-hidden">{{ index $ppl $randomIndex }}</div>
      </div>
      {{ end }} 
    </div>
  </main>
  <footer class="mt-auto print:hidden text-center max-w-none">
      {{- partial "socialslist.html" . }}
  </footer>
{{- if or (.Params.enabledebugpanel) (and (not .Params.enabledebugpanel) (site.Params.enabledebugpanel)) }}
{{ partial "debug-panel.html" . }}
{{- end }}
<script>
  // Function to print the current page
  function printCurrentPage() {
      window.print();
  }

  // Add click event listener to the print link
  document.getElementById('printPage').addEventListener('click', function(event) {
      event.preventDefault(); // Prevent default link behavior
      printCurrentPage(); // Call print function
  });


</script>

<script>
  // JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Object to store scores
  const scores = {
    q1: {},
    q2: {},
    q3: {},
    fin: {}
  };
  
  // Get all input fields
  const inputFields = document.querySelectorAll('input[type="number"]');
  
  // Add blur event listener to each input field
  inputFields.forEach(inputField => {
    inputField.addEventListener('blur', function() {
      const value = parseInt(this.value);
      const fieldName = this.name;
      const [team, quarter] = fieldName.split('-');
      
      scores[quarter][team] = value;
      
      // Check if both home score and away score have valid values
      if (!isNaN(scores[quarter]['hs']) && !isNaN(scores[quarter]['as'])) {
        // Update the display
        updateDisplay(scores, quarter);
      }
    });
  });
  
  // Function to update the display
  function updateDisplay(scores, quarter) {
    const winnerSquare = '.as-' + scores[quarter]['as'] + '.hs-' + scores[quarter]['hs'];
    const displayDiv = document.querySelector(winnerSquare);
    // Remove existing classes from all player-square divs
    const playerSquares = document.querySelectorAll('.player-square');
    // Set background color based on the scores
    if (quarter == 'q1') {
      playerSquares.forEach(square => {
        square.classList.remove('q1-winner');
      });
      displayDiv.classList.add('q1-winner');
    } else if (quarter == 'q2') {
      playerSquares.forEach(square => {
        square.classList.remove('q2-winner');
      });
      displayDiv.classList.add('q2-winner');
    } else if (quarter == 'q3') {
      playerSquares.forEach(square => {
        square.classList.remove('q3-winner');
      });
      displayDiv.classList.add('q3-winner');
    } else {
      playerSquares.forEach(square => {
        square.classList.remove('fin-winner');
      });
      displayDiv.classList.add('fin-winner');
    }
  }
});
  </script>
</body>

</html>